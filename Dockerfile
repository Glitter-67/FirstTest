# 1. ベースイメージの指定
# Pythonの公式イメージを使用します。軽量な-slim版がおすすめです。
FROM python:3.11-slim

# 2. コンテナ内の作業ディレクトリを設定
# これ以降のコマンドはこのディレクトリで実行されます。
WORKDIR /app

# 3. 依存関係のファイルをコピー
# まず、requirements.txtだけをコピーします。
# こうすることで、依存関係に変化がない限り、このレイヤーのキャッシュが再利用され、ビルドが速くなります。
COPY requirements.txt .

# 4. 依存関係のインストール
# requirements.txtに書かれたライブラリをインストールします。
RUN pip install --no-cache-dir -r requirements.txt

# 5. プロジェクトのすべてのファイルをコピー
# 依存関係のインストール後に、Botのコードを含むすべてのファイルをコピーします。
COPY . .

# 6. コンテナが起動したときに実行するコマンドを指定
# コンテナが立ち上がった際に、Botのスクリプトを実行するコマンドです。
# "bot.py" の部分は、あなたのBotのメインのファイル名に置き換えてください。
CMD ["python", "disc_bot_1.py"]
